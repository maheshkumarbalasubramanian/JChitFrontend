<!-- Show normal layout ONLY when NOT on a print route -->
<div class="app-container" *ngIf="!isPrintRoute">
  <!-- Sidebar -->
  <div class="sidebar" [class.sidebar-collapsed]="!sidebarOpen">
    <!-- Logo -->
    <div class="sidebar-header">
      <div class="logo-container">
        <div class="logo-icon">
          <span class="material-icons">diamond</span>
        </div>
        <div class="logo-text" *ngIf="sidebarOpen">
          <h1>GoldLoan Pro</h1>
          <p>Jewelry Management</p>
        </div>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="sidebar-nav">
      <div class="nav-item" *ngFor="let item of menuItems">
        <button 
          class="nav-button"
          [class.nav-button-active]="isMenuActive(item.id)"
          (click)="handleMenuClick(item.id)">
          <div class="nav-button-content">
            <div class="nav-icon-text">
              <span class="material-icons" [ngClass]="item.color">{{ item.icon }}</span>
              <span *ngIf="sidebarOpen" class="nav-label">{{ item.label }}</span>
            </div>
            <span *ngIf="sidebarOpen && item.submenu" class="material-icons nav-chevron" 
                  [class.nav-chevron-expanded]="isSubmenuExpanded(item.id)">
              keyboard_arrow_down
            </span>
          </div>
        </button>

        <!-- Submenu -->
        <div *ngIf="sidebarOpen && item.submenu && isSubmenuExpanded(item.id)" class="submenu">
          <button 
            *ngFor="let subItem of item.submenu"
            class="submenu-button"
            [class.submenu-button-active]="isMenuActive(subItem.id, item.id)"
            (click)="handleMenuClick(subItem.id, item.id)">
            <span class="material-icons">{{ subItem.icon }}</span>
            <span class="submenu-label">{{ subItem.label }}</span>
          </button>
        </div>
      </div>
    </nav>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <button class="menu-toggle" (click)="toggleSidebar()">
          <span class="material-icons">menu</span>
        </button>
        
        <div class="search-container">
          <span class="material-icons search-icon">search</span>
          <input 
            type="text" 
            placeholder="Search..."
            class="search-input"
            [(ngModel)]="searchTerm"
            (keyup.enter)="onSearch()">
        </div>
      </div>

      <div class="header-right">
        <!-- Notifications -->
        <button class="notification-button">
          <span class="material-icons">notifications</span>
          <span class="notification-badge">3</span>
        </button>

        <!-- Profile Dropdown -->
        <div class="profile-dropdown">
          <button class="profile-button" (click)="toggleProfileDropdown()">
            <div class="profile-avatar">
              <span class="material-icons">person</span>
            </div>
            <div class="profile-info">
              <p class="profile-name">Admin User</p>
              <p class="profile-role">Administrator</p>
            </div>
            <span class="material-icons">keyboard_arrow_down</span>
          </button>

          <div *ngIf="showProfileDropdown" class="dropdown-menu">
            <button class="dropdown-item" (click)="onProfile()">
              <span class="material-icons">person</span>
              <span>Profile</span>
            </button>
            <button class="dropdown-item" (click)="onChangePassword()">
              <span class="material-icons">lock</span>
              <span>Change Password</span>
            </button>
            <hr class="dropdown-divider">
            <button class="dropdown-item logout" (click)="onLogout()">
              <span class="material-icons">logout</span>
              <span>Logout</span>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Page Content -->
    <main class="page-content">
      <!-- Dashboard Content - Only show when on dashboard route -->
      <div *ngIf="isDashboardRoute()" class="dashboard">
        <!-- Stats Cards -->
      </div>

      <!-- Router Outlet for Other Components -->
      <router-outlet></router-outlet>
    </main>
  </div>
</div>

<!-- Print Route - Show ONLY the router outlet without any wrapper -->
<div class="print-route-container" *ngIf="isPrintRoute">
  <router-outlet></router-outlet>
</div>